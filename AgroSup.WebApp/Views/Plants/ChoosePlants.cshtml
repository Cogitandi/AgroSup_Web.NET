@model AgroSup.WebApp.ViewModels.Plants.PlantViewModel

@{
    ViewData["Title"] = "Wybierz rośliny";
    ViewData["ActivePage"] = ManageMenu.ChoosePlants;
    var message = @TempData["message"];
}
<!--- Content -->
<div class="row">
    <partial name="_DataMenuPartial" />
    <div class="col-md-10">
        <div class="container-md mx-4">
            <h2 class="text-center">Wybierz rośliny, które uprawiasz</h2>
            <hr />
            @if (message != null)
            {
                <partial name="_StatusMessage" model="message.ToString()" />
            }
            <form asp-action="ChoosePlants">
                <button type="submit" class="float-right btn btn-primary">Zapisz</button>
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="row my-3">
                    <input class="form-control col-md-3" id="listSearch" type="text" placeholder="Podaj nazwę rośliny">
                </div>
                <table class="table table-hover w-25 ">
                    <thead>
                        <tr>
                            <th scope="col">Roślina</th>
                            <th scope="col">Uprawiam</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model.AvailablePlants)
                        {
                            <tr>
                                <td>@item.Text</td>
                                <td>
                                    <input type="checkbox"
                                           name="SelectedPlants"
                                           value="@item.Value"
                                           @if (Model.SelectedPlants.Contains(item.Value)) { <text> checked </text> } />
                                </td>
                            </tr>
                        }

                    </tbody>
                </table>
            </form>
        </div>
        </div>
    </div>
    <!--- End content -->

@section Scripts {
<script>
    $(document).ready(function () {
        $("#listSearch").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("tbody tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script>
}